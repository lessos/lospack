
<style type="text/css">
.lps-infols-s6r-row:hover {
    cursor: pointer;
}
</style>

<table width="100%">
  <tr>
    <td>
      <form id="lps-infols-s6r-qry" action="#" class="form-inlines">
        <input id="lps-infols-s6r-qry-text" type="text"
          class="form-control _list_query_input" 
          placeholder="Press Enter to Search" 
          value="">
      </form>
    </td>
    <td align="right"></td>
  </tr>
</table>

<table class="table table-hover">
  <thead>
    <tr>
      <th>Name</th>
      <th>Last Version</th>
      <!-- <th>Versions</th> -->
      <th>
        <div id="lps-infols-s6r-grpdev" class="dropdown">
          <a id="lps-infols-s6r-grpdev-qryid" class="dropdown-toggle" data-toggle="dropdown" href="#">
            <span id="lps-infols-s6r-grpdev-qrydp">Groups</span>
          </a>
        </div>
      </th>
      <th>Updated</th>
      <th width="40px"></th>
    </tr>
  </thead>

  <tbody id="lps-infols-s6r"></tbody>

</table>

<div id="lps-infols-s6r-empty-alert" class="alert alert-warning hide">No more results ...</div>

<script id="lps-infols-s6r-grpdev-tpl" type="text/html">
  <a id="lps-infols-s6r-grpdev-qryid" class="dropdown-toggle" data-toggle="dropdown" href="#{[=it.qry_grpdev]}">
    <span id="lps-infols-s6r-grpdev-qrydp">{[=it.qry_grpdev_dp]}</span> <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <li><a class="grpdev-item" href="#" label="Groups">All Groups</a></li>
    {[~it.grpdev :v]}
    <li><a class="grpdev-item" href="#{[=v.key]}" label="{[=v.name]}">{[=v.name]}</a></li>
    {[~]}
  </ul>
</script>

<script id="lps-infols-s6r-tpl" type="text/html">
  {[~it :v]}
    <tr class="lps-infols-s6r-row" lpspkg="{[=v.meta.name]}">
      <td>{[=v.meta.name]}</td>
      <td>{[=v.lastVersion]}</td>
      <!-- <td>{[=v.pkg_num]}</td> -->
      <td>
        {[~v.grp_dev :gv]}
        <div>{[=gv.name]}</div>
        {[~]}
      </td>
      <td>{[=v.meta.updated]}</td>
      <td align="center">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      </td>
    </tr>
  {[~]}
</script>

<script type="text/javascript">

$("#lps-infols-s6r-qry").submit(function(event) {
    event.preventDefault();
    lpLps.InfoListRefresh("lps-infols-s6r");
});

$("#lps-infols-s6r-grpdev").on("click", ".grpdev-item", function() {
    $("#lps-infols-s6r-grpdev-qrydp").text($(this).attr("label"));
    $("#lps-infols-s6r-grpdev-qryid").attr("href", $(this).attr("href"));
    lpLps.InfoListRefresh("lps-infols-s6r");
});

$("#lps-infols-s6r").on("click", ".lps-infols-s6r-row", function() {

    var name = $(this).attr("lpspkg");

    l4iModal.Open({
        id     : "lps-infols-s6r-pkgls",
        title  : "Select a Package to Launch",
        tpluri : pandora.base +"sysmgr/+/lps/pkg/selector.tpl",
        callback : l4iModal.CurOptions.callback,
        success: function() {
            $("#lps-pkgls-s6r-qry-name").val(name);
            lpLps.PackageListRefresh("lps-pkgls-s6r");
        },
        buttons : [
            {
                onclick: "l4iModal.Close()",
                title: "Close",
            },
        ],
    })
});

var lpsInfoLsS6r = [
    "sysmgr/+/lps/js/index.js?_="+ Math.random(),
];
seajs.use(lpsInfoLsS6r, function() {
    lpLps.InfoListRefresh("lps-infols-s6r");
});

</script>
